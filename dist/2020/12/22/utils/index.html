<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js utils | Eliot&#39;s blog</title>
    <meta name="description" content="Eliot&#39;s blog">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.077bbf1d.css" as="style"><link rel="preload" href="/assets/js/app.706720d3.js" as="script"><link rel="preload" href="/assets/js/4.ce7b1c82.js" as="script"><link rel="preload" href="/assets/js/20.2fa4db34.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.077bbf1d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout"><header id="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="site-title router-link-active">Eliot's blog</a> <div class="links"><nav class="nav"><div class="nav-item"><a href="/" class="router-link-active router-active">技术</a></div><div class="nav-item"><a href="/others/诗词/">诗词</a></div> <div class="nav-item"><a href="/tag/">Tags</a></div></nav> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div id="slideBar-semitransparent" style="display:none;"></div> <div id="slideBar"><div id="about"><div class="portrait"><img src="/portrait.jpg" alt="portrait" class="portrait-img"></div> <div class="about-item is-link"><!----> <!----> <span class="about-msg">GitHub</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="OutLinkIcon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="about-item is-link"><!----> <!----> <span class="about-msg">Gitee</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="OutLinkIcon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div></div> <div class="nav-item"><a href="/tag/">Tags</a></div> <div class="nav-item"><a href="/" class="router-link-active router-active">技术</a></div><div class="nav-item"><a href="/others/诗词/">诗词</a></div></div></header> <div id="BlogContent" class="hasHeaders"><div class="theme-blog-content"><div id="last-updated"><span class="prefix">最后更新：</span> <span class="time">2020-12-22 1:47:36 ├F10: PM┤</span></div> <div class="content__default"><h1 id="js-utils"><a href="#js-utils" class="header-anchor">#</a> js utils</h1> <h2 id="美观的-name-value-打印"><a href="#美观的-name-value-打印" class="header-anchor">#</a> 美观的 name-value 打印</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 美观的 name-value 打印
 * @param {string} name
 * @param {string} value
 * @param {any[]} [args]
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">logNameValue</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">%c </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> %c </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> %c</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token string">&quot;background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;background:#41b883 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;background:transparent&quot;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>args
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="隐藏字符串"><a href="#隐藏字符串" class="header-anchor">#</a> 隐藏字符串</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 隐藏字符串
 * @param {string} str
 * @param {number} start
 * @param {number} end
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">invisibleStr</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> strLength <span class="token operator">=</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strLength <span class="token operator">&lt;=</span> start <span class="token operator">+</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> startStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> endStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>strLength <span class="token operator">-</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> invisibleStr <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> strLength <span class="token operator">-</span> start <span class="token operator">-</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> invisibleStr <span class="token operator">+=</span> <span class="token string">&quot;* &quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> startStr <span class="token operator">+</span> invisibleStr <span class="token operator">+</span> endStr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="深度复制传入的对象，json-parse-json-stringify-obj"><a href="#深度复制传入的对象，json-parse-json-stringify-obj" class="header-anchor">#</a> 深度复制传入的对象，JSON.parse(JSON.stringify(obj))</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 深度复制传入的对象，JSON.parse(JSON.stringify(obj));
 * @type {&lt;T&gt;(obj:any)=&gt;T}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="获取年龄"><a href="#获取年龄" class="header-anchor">#</a> 获取年龄</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取年龄
 * @param {string} strBirthday 计算年龄的生日日期
 * @returns {number} -1 为输入的日期大于当前日期
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">jsGetAge</span><span class="token punctuation">(</span><span class="token parameter">strBirthday</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> strBirthdayDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>strBirthday<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/-/g</span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> strBirthdayArr <span class="token operator">=</span> <span class="token punctuation">[</span>
    strBirthdayDate<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    strBirthdayDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    strBirthdayDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> yearDiff <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> strBirthdayArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> monthDiff <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> strBirthdayArr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dayDiff <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> strBirthdayArr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> age <span class="token operator">=</span>
    monthDiff <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">(</span>monthDiff <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> dayDiff <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> yearDiff <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> yearDiff<span class="token punctuation">;</span> <span class="token comment">//判断有没有到生日,没到就减1</span>
  <span class="token keyword">return</span> age <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="提取-url-的-query"><a href="#提取-url-的-query" class="header-anchor">#</a> 提取 url 的 query</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 提取 url 的 query
 * @param {string} url 需要提取的 url
 * @param {string} key query 的 key
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getUrlQuery</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(^|&amp;)</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=([^&amp;]*)(&amp;|$)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> resultList <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> resultList <span class="token operator">?</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>resultList<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="计时器"><a href="#计时器" class="header-anchor">#</a> 计时器</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 计时器
 * @param {number} totalTime - 总时间，单位：毫秒
 * @param {()=&gt;void} [handle] - 设置计时为 0 或小于 0 时的触发函数
 * @param {object} [option]
 * @param {number} [option.unit] - 计时间隔，单位：毫秒，default: 1000
 * @param {boolean} [option.auto] - 是否自动开始计时，default: false
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">countDown</span><span class="token punctuation">(</span>totalTime<span class="token punctuation">,</span> <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> option <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/** setInterval 的 id 用于 clearInterval */</span>
  <span class="token keyword">let</span> setIntervalId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token comment">/** 计时间隔，单位：毫秒 */</span>
  <span class="token keyword">const</span> unit <span class="token operator">=</span> option<span class="token punctuation">.</span>unit <span class="token operator">||</span> <span class="token number">1000</span><span class="token punctuation">;</span>

  <span class="token comment">/** 是否自动开始计时 */</span>
  <span class="token keyword">const</span> auto <span class="token operator">=</span> option<span class="token punctuation">.</span>auto <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> publicObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/** 剩余时间，单位：毫秒 */</span>
    timer<span class="token operator">:</span> totalTime<span class="token punctuation">,</span>

    <span class="token comment">/** 开始计时 */</span>
    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>setIntervalId<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      setIntervalId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        publicObj<span class="token punctuation">.</span>timer <span class="token operator">-=</span> unit<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>publicObj<span class="token punctuation">.</span>timer <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          publicObj<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          publicObj<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/**
     * 重置计时器
     * @param {number} [resetTime]
     */</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token parameter">resetTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      publicObj<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      publicObj<span class="token punctuation">.</span>timer <span class="token operator">=</span> resetTime <span class="token operator">||</span> totalTime<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>auto<span class="token punctuation">)</span> publicObj<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/** 停止计时 */</span>
    <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>setIntervalId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      setIntervalId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/** 设置计时为 0 或小于 0 时的触发函数 */</span>
    handle
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>auto<span class="token punctuation">)</span> publicObj<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> publicObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="获取颜色的灰度值"><a href="#获取颜色的灰度值" class="header-anchor">#</a> 获取颜色的灰度值</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取颜色的灰度值
 * @param {string} hex - HEX 颜色值
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getGrayScale</span><span class="token punctuation">(</span><span class="token parameter">hex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sColor <span class="token operator">=</span> hex<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//十六进制颜色值的正则表达式</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex">/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果是16进制颜色</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sColor <span class="token operator">&amp;&amp;</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>sColor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sColor<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> sColorNew <span class="token operator">=</span> <span class="token string">&quot;#&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sColorNew <span class="token operator">+=</span> sColor<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>sColor<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      sColor <span class="token operator">=</span> sColorNew<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//处理六位的颜色值</span>
    <span class="token keyword">let</span> sColorChange <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sColorChange<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;0x&quot;</span> <span class="token operator">+</span> sColor<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      sColorChange<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.299</span> <span class="token operator">+</span>
      sColorChange<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.587</span> <span class="token operator">+</span>
      sColorChange<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.114</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="判断是否从左边向右滑动"><a href="#判断是否从左边向右滑动" class="header-anchor">#</a> 判断是否从左边向右滑动</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 判断是否从左边向右滑动
 * @param {()=&gt;void} [handle]
 * @param {Object} [option]
 * @param {number} [option.startingPoint] - 从左边开始的最大触发阈值，default: 80
 * @param {number} [option.offsetValue] - 滑动起点和终点的上下最大触发偏移值，default: 100
 * @param {number} [option.slidingLength] - 滑动的最小触发长度，default: 150
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">slideLeft</span><span class="token punctuation">(</span><span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> option <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/** @type {{pageX:number,pageY:number}} */</span>
  <span class="token keyword">let</span> touchstartObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> startingPoint <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span> offsetValue <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> slidingLength <span class="token operator">=</span> <span class="token number">150</span> <span class="token punctuation">}</span> <span class="token operator">=</span> option<span class="token punctuation">;</span>

  <span class="token keyword">const</span> publicObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/** 设置是否可以触发 handle */</span>
    trigger<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    handle<span class="token punctuation">,</span>
    <span class="token comment">/** @param {TouchEvent} e */</span>
    <span class="token function">touchstart</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> changedTouches <span class="token operator">=</span> e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> theTouchstartObj <span class="token operator">=</span> <span class="token punctuation">{</span>
        pageX<span class="token operator">:</span> changedTouches<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span>
        pageY<span class="token operator">:</span> changedTouches<span class="token punctuation">.</span>pageY
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>publicObj<span class="token punctuation">.</span>trigger<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>theTouchstartObj<span class="token punctuation">.</span>pageX <span class="token operator">&gt;</span> startingPoint<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      touchstartObj <span class="token operator">=</span> theTouchstartObj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/** @param {TouchEvent} e */</span>
    <span class="token function">touchend</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>touchstartObj<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> changedTouches <span class="token operator">=</span> e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> theSlidingLength <span class="token operator">=</span> changedTouches<span class="token punctuation">.</span>pageX <span class="token operator">-</span> touchstartObj<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
      <span class="token keyword">const</span> theOffsetValue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>
        changedTouches<span class="token punctuation">.</span>pageY <span class="token operator">-</span> touchstartObj<span class="token punctuation">.</span>pageY
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> isSlideLeft <span class="token operator">=</span>
        theSlidingLength <span class="token operator">&gt;</span> slidingLength <span class="token operator">&amp;&amp;</span> theOffsetValue <span class="token operator">&lt;</span> offsetValue<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>isSlideLeft<span class="token punctuation">)</span> publicObj<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      touchstartObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> publicObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="判断是否往上滑动或往下滑动"><a href="#判断是否往上滑动或往下滑动" class="header-anchor">#</a> 判断是否往上滑动或往下滑动</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 判断是否往上滑动或往下滑动
 * @param {(slidingDirection:&quot;top&quot;|&quot;bottom&quot;)=&gt;void} [handle]
 * @param {Object} [option]
 * @param {number} [option.offsetValue] - 滑动起点和终点的左右最大触发偏移值，default: 80
 * @param {number} [option.slidingLength] - 滑动的最小触发长度，default: 20
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">slideTopBottom</span><span class="token punctuation">(</span><span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> option <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/** @type {{pageX:number,pageY:number}} */</span>
  <span class="token keyword">let</span> touchstartObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> offsetValue <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span> slidingLength <span class="token operator">=</span> <span class="token number">20</span> <span class="token punctuation">}</span> <span class="token operator">=</span> option<span class="token punctuation">;</span>

  <span class="token keyword">const</span> publicObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/** 设置是否可以触发 handle */</span>
    trigger<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    handle<span class="token punctuation">,</span>
    <span class="token comment">/** @param {TouchEvent} e */</span>
    <span class="token function">touchstart</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> changedTouches <span class="token operator">=</span> e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> theTouchstartObj <span class="token operator">=</span> <span class="token punctuation">{</span>
        pageX<span class="token operator">:</span> changedTouches<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span>
        pageY<span class="token operator">:</span> changedTouches<span class="token punctuation">.</span>pageY
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>publicObj<span class="token punctuation">.</span>trigger<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      touchstartObj <span class="token operator">=</span> theTouchstartObj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/** @param {TouchEvent} e */</span>
    <span class="token function">touchend</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>touchstartObj<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> changedTouches <span class="token operator">=</span> e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> theSlidingLength <span class="token operator">=</span> changedTouches<span class="token punctuation">.</span>pageY <span class="token operator">-</span> touchstartObj<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
      <span class="token keyword">const</span> theOffsetValue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>
        changedTouches<span class="token punctuation">.</span>pageX <span class="token operator">-</span> touchstartObj<span class="token punctuation">.</span>pageX
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>theOffsetValue <span class="token operator">&gt;</span> offsetValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        touchstartObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>theSlidingLength<span class="token punctuation">)</span> <span class="token operator">&gt;</span> slidingLength<span class="token punctuation">)</span>
        publicObj<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>theSlidingLength <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;top&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bottom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> publicObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div id="Statement"><p><span class="Statement-title">文章作者：</span> <span class="Statement-content">Eliot Ye</span></p> <p class="singleText"><span class="Statement-title">文章链接：</span> <span class="Statement-content"><a href="https://eliot-ye.gitee.io/2020/12/22/utils/" target="_blank">https://eliot-ye.gitee.io/2020/12/22/utils/</a></span></p> <p><span class="Statement-title">版权声明：</span> <span class="Statement-content">
      本博客所有文章除特别声明外，均采用《
      <a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">BY-NC-SA</a>
      》许可协议。转载请注明出处！
    </span></p></div> <div id="BlogContent-tags"><a href="/tag/js/" class="BlogContent-tag"># js</a></div> <!----></div> <div id="Outline"><h4 class="Outline-title">目录</h4> <ul class="sidebar"><a href="/2020/12/22/utils/#美观的-name-value-打印" class="sidebar-link"><li class="Outline-item">美观的 name-value 打印</li></a><a href="/2020/12/22/utils/#隐藏字符串" class="sidebar-link"><li class="Outline-item">隐藏字符串</li></a><a href="/2020/12/22/utils/#深度复制传入的对象，json-parse-json-stringify-obj" class="sidebar-link"><li class="Outline-item">深度复制传入的对象，JSON.parse(JSON.stringify(obj))</li></a><a href="/2020/12/22/utils/#获取年龄" class="sidebar-link"><li class="Outline-item">获取年龄</li></a><a href="/2020/12/22/utils/#提取-url-的-query" class="sidebar-link"><li class="Outline-item">提取 url 的 query</li></a><a href="/2020/12/22/utils/#计时器" class="sidebar-link"><li class="Outline-item">计时器</li></a><a href="/2020/12/22/utils/#获取颜色的灰度值" class="sidebar-link"><li class="Outline-item">获取颜色的灰度值</li></a><a href="/2020/12/22/utils/#判断是否从左边向右滑动" class="sidebar-link"><li class="Outline-item">判断是否从左边向右滑动</li></a><a href="/2020/12/22/utils/#判断是否往上滑动或往下滑动" class="sidebar-link"><li class="Outline-item">判断是否往上滑动或往下滑动</li></a> <li style="height: 30px;"></li></ul></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.706720d3.js" defer></script><script src="/assets/js/4.ce7b1c82.js" defer></script><script src="/assets/js/20.2fa4db34.js" defer></script>
  </body>
</html>
